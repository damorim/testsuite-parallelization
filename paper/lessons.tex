\section{Discussion}

This paper reports our finding on a study to evaluate impact and usage
of test suite parallelization, enabled by modern build systems and
testing frameworks.  This study is important given the importance to
speedup testing.  Note that test suite parallelization is
complementary to alternative approach to speedup testing
(see~Section~\ref{sec:related}).  The observations we made in this
study trigger multiple actions:

\begin{itemize}
\item \emph{Incentivize forking.}~Forked JVMs manifest low rates of
  test flakiness.  For instance, in \emph{\ForkSeq{}}, only 4 of 10
  projects manifest flakiness and, excluding the extreme case of
  \CodeIn{Moquette}, projects manifest flaky tests in low rates 0.23\%
  to 1.70\%.  Developers of projects with long-running test suites
  should consider using that feature, which is available in modern
  build systems today (\eg{}, Maven).
\item \emph{Break test dependencies.}~Non-forked JVMs can achieve
  impressive speedups at the expense of sometimes impressive rates of
  flakiness.  Breaking test dependencies to avoid flakiness and take
  full advantage of those options is advised for developers with
  greater interest in efficiency.
\item \emph{Refactor tests for load balancing.}~Forked JVMs scales
  better with the number of cores when the test workload is balanced
  across testing classes.  To balance the workload, automated
  user-oblivious refactoring can help in scenarios where developers
  are not willing to change test code but have access to machines with
  a high number of cores.
\item \emph{Improve debugging for build systems.}~While preparing our
  experiments, we found scenarios\Comment{, related to test
    parallelization,} where Maven's executions did not reflect
  corresponding JUnit's executions. \Comment{(Docker reproduction scripts
  available.)} Those issues can hinder developers from using parallel
  testing. Better debugging infrastructure is important.
\end{itemize}

This study brings to light the benefits and burdens of test suite
parallelization to improve test efficiency. It provides
recommendations to practitioners and developers of new techniques and
tools aiming to speed up test execution with parallelization.


%%  LocalWords:  parallelization Incentivize JVMs Moquette Refactor
%%  LocalWords:  refactoring JUnit's
